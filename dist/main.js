(()=>{"use strict";class t{constructor(t){this.owner=t,this.board=[],this.fleet=[],this.bucket=[],this.loser=!1}generateBoard(){for(let t=0;t<10;t++)this.board[t]=new Array(10).fill(null);return this.board}fillBucket(t){this.bucket.includes(t)||this.bucket.push(t)}assembleFleet(t){this.fleet.includes(t)||this.fleet.push(t)}placeShip(t,e,i){if(this.isLegal(t,e,i))if("horizontal"===t.orientation)for(let n=0;n<t.length;n++)this.board[e][i+n]=t;else for(let n=0;n<t.length;n++)this.board[e+n][i]=t}random(){return Math.floor(10*Math.random())}randomOrientation(t){const e=Math.random()<.5;for(let i=0;i<this.fleet.length;i++)e&&t.changeOrientation()}computerPlacement(){const t=this.random(),e=this.random();for(let i=0;i<this.bucket.length;i++){if(this.randomOrientation(this.bucket[i]),0===this.bucket.length)return;if(this.isLegal(this.bucket[i],t,e)){if("horizontal"===this.bucket[i].orientation&&this.isLegal(this.bucket[i],t,e))for(let n=0;n<this.bucket[i].length;n++)this.board[t][e+n]=this.bucket[i];else if("vertical"===this.bucket[i].orientation&&this.isLegal(this.bucket[i],t,e))for(let n=0;n<this.bucket[i].length;n++)this.board[t+n][e]=this.bucket[i]}else this.computerPlacement();this.bucket.shift(),this.computerPlacement()}}isLegal(t,e,i){if(e<0||e>9||i<0||i>9)return!1;if("horizontal"===t.orientation){if(i+t.length>9)return!1;for(let n=0;n<t.length;n++)if(this.board[e][i+n])return!1}else if("vertical"===t.orientation){if(e+t.length>9)return!1;for(let n=0;n<t.length;n++)if(this.board[e+n][i])return!1}return!0}receiveAttack(t,e){"hit"!==this.board[t][e]&&"miss"!==this.board[t][e]&&(null===this.board[t][e]?this.board[t][e]="miss":this.board[t][e]="hit")}gameOver(){this.loser=this.fleet.every((t=>t.isSunk()))}}class e{constructor(t,e){this.name=t,this.length=e,this.orientation="horizontal",this.hits=[]}hit(t){this.hits.includes(t)||t<0||t>=this.length||this.hits.push(t)}isSunk(){return this.hits.length===this.length}changeOrientation(){return"horizontal"===this.orientation?this.orientation="vertical":this.orientation="horizontal"}}const i=document.getElementById("player-container"),n=document.getElementById("computer-container"),r=new t("human"),s=new t("computer"),o=new class{appendCells(t,e,i){return`<div class="cell ${i}" data-row="${t}" data-col="${e}" ></div>`}appendPieces(t){return`<div class="${t}-docked ${t}" draggable="true"></div>`}renderPieces(t,e){let i=this.appendPieces(e);t.innerHTML+=i}renderBoard(t,e){this.resetBoard(t);let i="";for(let t=0;t<e.board.length;t++)for(let n=0;n<e.board.length;n++){let r=e.board[t][n];null===r?r="":null!==r&&"object"==typeof r&&(r="computer"===e.owner?r.name:""),i+=this.appendCells(t,n,r)}t.insertAdjacentHTML("afterbegin",i)}resetBoard(t){t.textContent=""}};function l(){return[new e("carrier",5),new e("battleship",4),new e("destroyer",3),new e("cruiser",3),new e("submarine",2)]}const a=document.getElementById("ship-select");window.addEventListener("DOMContentLoaded",(()=>{console.log("update");const t=l();r.generateBoard(),s.generateBoard();for(let e=0;e<t.length;e++)r.fillBucket(t[e]),s.assembleFleet(t[e]);for(let e=0;e<t.length;e++){const t=l();s.fillBucket(t[e])}for(let t=0;t<r.bucket.length;t++)o.renderPieces(a,r.bucket[t].name);s.computerPlacement(),o.renderBoard(i,r),o.renderBoard(n,s)}));const h=document.getElementById("flip");let c=0;h.addEventListener("click",(function(){const t=Array.from(a.children);c=0===c?90:0,t.forEach((t=>t.style.transform=`rotate(${c}deg)`)),console.log(r.bucket)}))})();
//# sourceMappingURL=main.js.map